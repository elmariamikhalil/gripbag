<div class="search-page">
  <div class="container">
    <div class="search-header">
      <h1>Search</h1>
      <form action="/search" method="get" class="search-form">
        <input type="search" name="q" value="{{ search.terms }}" placeholder="Search products..." autofocus>
        <button type="submit" class="btn btn--primary">Search</button>
      </form>
    </div>

    {% if search.performed %}
      <div class="search-results">
        <p class="search-results__count">
          {% if search.results_count > 0 %}
            Found {{ search.results_count }} result{% if search.results_count != 1 %}s{% endif %} for "{{ search.terms }}"
          {% else %}
            No results found for "{{ search.terms }}"
          {% endif %}
        </p>

        {% if search.results_count > 0 %}
          <div class="product-grid">
            {% for item in search.results %}
              {% if item.object_type == 'product' %}
                {% render 'product-card', product_card_product: item %}
              {% endif %}
            {% endfor %}
          </div>

          {% paginate search.results by 24 %}
            {% if paginate.pages > 1 %}
              <div class="pagination">
                {% if paginate.previous %}
                  <a href="{{ paginate.previous.url }}" class="btn btn--secondary">← Previous</a>
                {% endif %}
                <span>Page {{ paginate.current_page }} of {{ paginate.pages }}</span>
                {% if paginate.next %}
                  <a href="{{ paginate.next.url }}" class="btn btn--secondary">Next →</a>
                {% endif %}
              </div>
            {% endif %}
          {% endpaginate %}
        {% endif %}
      </div>
    {% endif %}
  </div>
</div>

<style>
.search-page {
  padding: 80px 0;
  min-height: 60vh;
}

.search-header {
  text-align: center;
  max-width: 700px;
  margin: 0 auto 60px;
}

.search-header h1 {
  margin-bottom: 30px;
}

.search-form {
  display: flex;
  gap: 15px;
}

.search-form input {
  flex: 1;
  padding: 18px 24px;
  font-size: 16px;
  border: 2px solid var(--color-border);
  border-radius: 50px;
}

.search-form input:focus {
  border-color: var(--color-primary);
  outline: none;
}

.search-results__count {
  text-align: center;
  font-size: 18px;
  color: var(--color-text-muted);
  margin-bottom: 40px;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 30px;
  margin-bottom: 60px;
}

.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin-top: 60px;
}

@media (max-width: 640px) {
  .search-form {
    flex-direction: column;
  }
  
  .search-form button {
    width: 100%;
  }
}
</style>